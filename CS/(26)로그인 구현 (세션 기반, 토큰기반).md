# 로그인 구현 (세션 기반, 토큰기반)

### 로그인 구현 방식은?

- 로그인 구현방식은 세션기반인증방식과 토큰기반인증방식으로 나뉜다.

### 세션과 세션ID란?

- 세션 → 서버와 클라이언트의 연결이 활성화된 상태를 의미한다.
- 세션ID → 웹 서버 또는 DB에 저장되는 클라이언트에 대한 유니크한 ID이다.

### 세션기반 로그인 프로세스는?

- 처음 로그인을 한다.
- 세션 ID가 생성된다.
- 서버에서 세션ID를 쿠키로 설정해서 클라이언트에 전달한다.
- 클라이언트가 서버에 요청을 보낼 때 해당 세션ID를 쿠키로 담아서 전에 로그인했던 아이디인지 확인한다.
- 로그인을 유지한다.

### 세션기반 로그인의 단점은?

- 사용자의 상태에 관한 데이터를 서버에 저장했을 때 로그인 중인 유저의 수가 늘어난다면 서버의 메모리 과부화가 일어날 수 있다.
- DB중 RDBMS에 저장한다면 직렬화 및 역직렬화에 관한 오버헤드가 발생한다.

### 토큰기반 인증 방식이란?

- 토큰기반 인증방식은 인증받은 사용자들에게 토큰을 발급하고, 서버에 요청을 할 때 헤더에 토큰을 함께 보내도록 유효성 검사를 하는 방식이다.
- 상태를 유지하지 않으므로 stateless구조를 갖는다.
- 토큰은 주로 JWT토큰이 활용된다.

### JWT란?

- JWT는 JSON Web Token을 의미하며 헤더, 페이로드, 서명으로 이루어져 있다.
- JSON 객체로 인코딩되며 메시지 인증, 암호화에 사용된다.
- 헤더
    - 어떠한 방법의 서명 알고리즘을 사용할 것인가에 대한 정보가 있다.
- 페이로드
    - 데이터, 토큰 발급자, 토큰 유효기간에 대한 정보가 있다.
- 시그니처(서명)
    - 헤더에 정의된 알고리즘으로 인코딩된 헤더 + 인코딩된 페이로드 + 비밀키 를 기반으로 생성된 서명값이다.

### JWT의 장점은?

- 사용자 인증에 필요한 모든 정보는 토큰 자체에 포함하기 때문에 별도의 인증 저장소가 필요 없다.
- 다른 유형의 토큰보다 비교적 경량화 되어있다.
- 디코딩 시 JSON으로 나와서 JSON 기반으로 직렬, 역직렬화가 가능하다.

### JWT의 단점은?

- 토큰이 비대해질 경우 서버과부화에 영향을 줄 수 있다.
- 토큰을 탈취당할 경우 디코딩했을 때 데이터를 볼 수 있다.
